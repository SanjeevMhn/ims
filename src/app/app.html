<div class="wrapper text-[62.5%] h-screen w-full p-[2em] flex flex-col">
  @if(getWeeks$ | async; as weeks){
  <header class="flex gap-[1.5em] items-center mb-[1.5em]">
    <form [formGroup]="currentMonthForm">
      <input
        type="month"
        name=""
        id=""
        formControlName="month"
        class="form-control"
        (change)="onMonthChange($event)"
      />
    </form>
    <select name="" id="" class="form-control" (change)="onWeekChange($event)">
      <option value="null">Select Week</option>
      @for(week of getTotalWeeks(); track week){
      <option [value]="week">Week {{ week }}</option>
      }
    </select>
    <h2 class="text-[2em] font-semibold ml-auto">Supplier Product Delivery Calendar</h2>
  </header>
  <div class="table-container w-full overflow-y-auto grow">
    <table class="calendar-table w-full">
      <thead>
        <tr>
            <th rowspan="2">Supplier</th>
            <th rowspan="2" class="align-middle">Product</th>
            <td rowspan="2" class="p-0! border-0!" [attr.colspan]="weeks.length + 1">
                <table class="w-full h-full text-[62.5%]">
                    <td [attr.colspan]="weeks.length" class="p-0! border-0!">
                        <table class="w-full h-full text-[62.5%]">
                            <tr>
                                @for(week of weeks; track $index){
                                <td
                                    [class.text-neutral-400]="!week.is_current"
                                >
                                    {{ week == null ? $index + 1 : week.dayIndex }}
                                </td>
                                }
                            </tr>
                            <tr>
                                @for(week of weeks; track $index){
                                <td
                                    [class.text-neutral-400]="!week.is_current"
                                >
                                    {{ week == null ? $index + 1 : week.dayName }}
                                </td>
                                }
                            </tr>
                        </table>
                    </td>
                </table>
            </td>
        </tr>
      </thead>
      <tbody>
        @for(delivery of supplierDelivery; track delivery.id){
            <tr>
                <td>{{delivery.supplier_name}}</td>
               <td class="p-0! border-0!">
                    <table class="text-[62.5%] w-full">
                        @for(product of delivery.supplier_products; track product.id){
                            <tr>
                                <td>{{product.product_name}}</td>
                            </tr>
                        }
                    </table>
                </td>
                <td class="p-0! border-0!" [attr.colspan]="weeks.length + 2">
                    <table class="text-[62.5%] w-full">
                        @for(product of delivery.supplier_products; track product.id){
                            <tr>
                                @for(week of weeks; track $index){
                                    <td class="h-[2.2em]">22</td>
                                }
                            </tr>
                        }
                    </table>
                </td>
               
                   
            </tr>
        }
      </tbody>
    </table>
  </div>
  }
</div>
<router-outlet />
