@if(getWeeks$ | async; as weeks){
<header class="flex gap-[1.5em] items-center p-[1.5em_2.5em] bg-[#1b1b1b] ">
  <h2 class="text-[2em] font-semibold text-white w-[calc(10.5em)]">Events Calendar</h2>
  @if(viewChange$ | async; as currentView){

  <div class="pagination-container flex items-center gap-[1em]">
    <button
      type="button"
      class="pagination-btn cursor-pointer p-[0.8em] w-[3.2em] h-[3.2em] rounded-full border border-[#adadad] flex items-center justify-center"
      (click)="prevView(currentView)"
      [class]="
        currentView == 'week' && (selectedWeek$ | async) == 1
          ? 'cursor-not-allowed! grayscale-75 opacity-50'
          : ''
      "
    >
      <span class="icon-container text-[1.2em]">
        <lucide-angular [img]="chevronleft" class="text-white" />
      </span>
    </button>
    <button
      class="cursor-pointer p-[0.5em] min-w-[5.5em] rounded-full border border-[#adadad] text-[1.6em] text-white"
      (click)="gotoToday(currentView, weeks.group)"
    >
      Today
    </button>
    <button
      type="button"
      class="pagination-btn cursor-pointer p-[0.8em] rounded-full w-[3.2em] h-[3.2em] flex items-center justify-center border border-[#adadad]"
      (click)="nextView(currentView)"
      [class]="
        currentView == 'week' && (selectedWeek$ | async) == totalWeeks
          ? 'cursor-not-allowed! grayscale-75 opacity-50'
          : ''
      "
    >
      <span class="icon-container">
        <lucide-angular [img]="chevronright" class="text-white" />
      </span>
    </button>
  </div>
  <form [formGroup]="currentMonthForm">
    <input
      type="month"
      name=""
      id=""
      formControlName="month"
      class="form-control bg-[#1b1b1b]! text-white!"
      (change)="onMonthChange($event)"
    />
  </form>
  @if(currentView == 'week'){
  <!-- <div class="date text-[2.2em] font-medium">{{getFormattedDate(currentMonthForm.get('month')?.value)}}</div> -->
  <div class="date text-[2.2em] font-medium text-white">Week {{ selectedWeek$ | async }}</div>
  }
  <div class="group flex items-center gap-[0.5em] ml-auto">
    <select
      name=""
      id=""
      class="form-control  bg-[#1b1b1b]! text-white!"
      (change)="onViewChange($event)"
      [formControl]="currentViewFormControl"
    >
      <option value="month">Month</option>
      <option value="week">Week</option>
    </select>
  </div>
  }
</header>

<div class="h-full grid grid-cols-[25em_1fr] bg-[#1b1b1b]">
  <aside class="sidebar bg-[#1b1b1b] p-[2em] ">
    <button
      type="button"
      class="btn flex items-center gap-[0.5em] p-[1.5em_2em] rounded-2xl bg-[#40454A] cursor-pointer"
    >
      <span class="icon-container">
        <lucide-angular [img]="plusIcon" class="text-white" />
      </span>
      <span class="label-text text-[1.75em] text-white" (click)="showAddEventForm(null, true)">Create</span>
    </button>
  </aside>
  <div class="pr-[2.5em] pb-[2.5em]">
    <div class="calendar-container grow bg-[#131314] text-white overflow-hidden" [class.h-full]="(viewChange$ | async) == 'month'">
      <div class="week day-names">
        @for(day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']; track day){
        <div class="day-name">{{ day }}</div>
        }
      </div>

      <div class="calendar-body" [class.grid]="weeks.week == null">
        @if(weeks.week == null){ @for(week of weeks.group; track $index + 1){
        <div class="week">
          @for(day of week; track $index + 2){
          <div class="day" (click)="showAddEventForm(day)">
            <div class="day-index" [class.today]="checkForToday(day.fullDate)">
              @if(!day.is_current){
              {{ day.monthName }} - }
              {{ day.dayIndex }}
            </div>
            <ul class="event-list flex flex-col gap-[0.2em]">
              @for(event of eventService.getEventList(); track $index + 1){ @if(event.date ==
              day.fullDate){
              <li
                class="event p-[0.2em_0.5em] bg-green-700 text-white cursor-pointer text-[14px] rounded-lg"
                (click)="showEvent($event, event)"
              >
                {{ event.title }}
              </li>
              } }
            </ul>
          </div>
          }
        </div>
        } }@else{
        <div class="week">
          @for(day of weeks.group[weeks.week - 1]; track $index + 3){
          <div class="day min-h-[100px]" (click)="showAddEventForm(day)">
            <div class="day-index" [class.today]="checkForToday(day.fullDate)">
              @if(!day.is_current){
              {{ day.monthName }} - }
              {{ day.dayIndex }}
            </div>
            <ul class="event-list flex flex-col gap-[0.2em]">
              @for(event of eventService.getEventList(); track $index){ @if(event.date ==
              day.fullDate){
              <li
                class="event p-[0.2em] text-center bg-green-700 text-white cursor-pointer text-[14px] rounded-lg"
                (click)="showEvent($event, event)"
              >
                {{ event.title }}
              </li>
              } }
            </ul>
          </div>
          }
        </div>
        }
      </div>
    </div>
  </div>
</div>
}
